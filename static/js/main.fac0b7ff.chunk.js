(this.webpackJsonppersist=this.webpackJsonppersist||[]).push([[0],{65:function(e,t,a){e.exports=a(96)},70:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),i=(a(70),a(16)),s=(a(76),a(12)),l=a(27),u=a(56),p=a(57),g=a(39),m=a.n(g),d=a(58),f=a(30);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={data:{},loading:!1,fetched:!1,error:!1,loggedIn:!1,message:""},O={data:{},loading:!1,fetched:!1,error:!1,loggedIn:!1,message:""},y={key:"me",storage:m.a},E=Object(s.combineReducers)({me:Object(l.a)(y,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat("GET_ME","_PENDING"):return b({},e,{loading:!0});case"".concat("LOGIN","_FULFILLED"):return localStorage.setItem("accessToken",t.payload.data.access_token),b({},e);case"".concat("GET_ME","_FULFILLED"):return b({},e,{loading:!1,data:t.payload.data.user,fetched:!0,loggedIn:!0});case"".concat("GET_ME","_REJECTED"):return b({},e,{loading:!1,error:!0,message:t.payload});case"".concat("LOGOUT","_FULFILLED"):return localStorage.removeItem("accessToken"),{state:O,loggedIn:!1};default:return e}}))}),j=Object(p.composeWithDevTools)(Object(s.applyMiddleware)(d.a,u.a)),w=Object(s.createStore)(E,j),k=Object(l.b)(w),L=a(31),I=a(32),T=a(35),C=a(33),D=a(36),N=a(41),P=a.n(N),_=function(){return function(e){return e({type:"GET_ME",payload:P.a.get("https://dev.propel.live/api/v1/users/me",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}})}).catch((function(t){if(t.response&&401===t.response.status)return k.purge(),e(S())}))}},S=function(){return{type:"LOGOUT",payload:Promise.resolve(!1)}},F=a(129),G=a(128),M=a(123),U=a(126),x=(a(95),Object(M.a)((function(e){return{button:{margin:e.spacing(1)},loginButton:{margin:e.spacing(1),backgroundColor:"#2e2e2e",color:"#fff","&:hover":{backgroundColor:"#2e2e2e",color:"#fff"}},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(1),width:300},inputContainer:{display:"flex",flexDirection:"column",marginBottom:e.spacing(1)},paper:{padding:e.spacing(2)}}})));function B(e){var t=e.email,a=e.handleChange,n=e.handleLogin,o=e.password,c=x();return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:n},r.a.createElement(U.a,{className:c.paper},r.a.createElement("div",{className:c.inputContainer},r.a.createElement(G.a,{name:"email",className:c.textField,onChange:a,label:"Email",margin:"normal",variant:"outlined",value:t}),r.a.createElement(G.a,{name:"password",className:c.textField,onChange:a,type:"password",label:"Password",margin:"normal",variant:"outlined",value:o})),r.a.createElement(F.a,{variant:"contained",className:c.loginButton,onClick:n,type:"submit"},"Login"))))}var A={loginUser:function(e,t){return function(a){return a({type:"LOGIN",payload:P.a.post("https://dev.propel.live/api/v1/auth/login",{email:e,password:t})}).then((function(e){return a(_(e.value.data.access_token))}))}}},J=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleLogin=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;a.props.loginUser(n,r)},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a}return Object(D.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return r.a.createElement(B,{handleLogin:this.handleLogin,handleChange:this.handleChange,email:this.state.email,password:this.state.password})}}]),t}(n.Component),R=Object(i.b)((function(e){return{me:e.me}}),A)(J),W={logout:S},z=Object(M.a)((function(e){return{paper:{padding:e.spacing(2)},button:{margin:e.spacing(1),marginTop:e.spacing(2)}}}));var $=Object(i.b)((function(e){return{me:e.me}}),W)((function(e){var t=z(),a=e.me.data;return r.a.createElement(U.a,{className:t.paper},a.fullname,r.a.createElement("div",null,r.a.createElement(F.a,{variant:"contained",className:t.button,onClick:function(){return e.logout()}},"Logout")))})),q={getMe:_},H=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={loading:a.props.accessToken&&!a.props.me.fetched},a}return Object(D.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.loading&&this.props.getMe().then((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){return this.state.loading?null:this.props.me.loggedIn?r.a.createElement($,{me:this.props.me}):r.a.createElement(R,null)}}]),t}(n.Component),K=Object(i.b)((function(e){return{me:e.me,accessToken:localStorage.getItem("accessToken")}}),q)(H);var Q=function(){return r.a.createElement(i.a,{store:w},r.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[65,1,2]]]);
//# sourceMappingURL=main.fac0b7ff.chunk.js.map